# V10 Recommandations – 2025-08-09_10-47-37

## Executive summary
Base modulaire et documentée. Corriger un bug structurant dans `Core/Agents/V10/specialized_tools.py`, aligner les tests avec les noms/contrats actuels, renforcer la sécurité d’exécution via `Core/ProcessManager`, et normaliser mocks/imports optionnels. Objectif: pipeline minimal vert (mock LLM explicite + mémoire simulée + outils locaux) et docs alignées sur le code.

## P0 (bloquants)
1) specialized_tools – corriger `V10ReadChunksUntilScopeTool`
- Déplacer la logique `execute/_detect_scope_boundaries/...` depuis le mock vers la classe outil.
- Remplacer `analyze_with_llm` par `generate_response` (ou fournir la méthode), garder le mock clairement nommé (`MockLLMProvider`).
- `try/except ImportError` autour de `TemporalFractalMemoryEngine` (fallback simulé).
- Fichier: `Core/Agents/V10/specialized_tools.py`.

2) Tests ↔ code – harmoniser symboles et API
- `V10ToolResult` → `ToolResult` (ou alias). Nettoyer attentes `V10TemporalNode/V10TemporalLink` absentes.
- `process_request` → utiliser `handle_request` (ou wrapper léger).
- Fichiers: `Core/Agents/V10/tests/*`.

## P1
3) Sécurité exécution shell
- Remplacer usages `subprocess` directs par `Core/ProcessManager` (ou wrapper) là où possible.
- Valider/whitelister `command`, conserver `timeout`, journaliser safe.
- Fichier: `Core/Agents/V10/tool_agent.py` (outil `execute_command`).

4) Imports optionnels robustes
- Standardiser `try/except ImportError` + logs pour MCP, Temporal Engine, LLM providers.
- Fichiers: `Core/Agents/V10/*`, `Core/Providers/*`.

5) Factorisation ToolAgent
- Éviter double instanciation (passer une instance unique à `dev_agent.execute_plan` ou confier l’exécution au `tool_agent` déjà attaché à l’assistant).
- Fichiers: `Core/Agents/V10/assistant_v10.py`, `Core/Agents/V10/dev_agent.py`.

## P2
6) Observabilité
- Étendre `get_tool_statistics()` (compteurs d’exécutions, taux de succès, latences) + health check central.

7) Documentation
- Les nouveaux READMEs reflètent le code: maintenir cette source de vérité et supprimer les anciens MD divergents.
- Retirer du repo les répertoires `.pytest_cache`.

8) Performance / Concurrency
- Rendre la taille de chunk paramétrable (résumeur/streaming). Permettre exécution concurrente d’étapes indépendantes dans les plans.

## Plan d’action (jalons)
- J1: P0 fix + alignement tests (pipeline vert minimal)
- J2: P1 sécurité/imports + factorisation ToolAgent
- J3: Observabilité + docs + cleanup

## KPIs
- Tests verts `Core/Agents/V10` (mock) sous 2 minutes
- 0 ImportError à froid (MCP/Temporal/LLM absents)
- Temps de réponse file ops < 3s (cas simples)

## Annexes
- specialized_tools: vérifier que `V10SpecializedToolsRegistry` expose bien `read_chunks_until_scope` après refactor.
- ProcessManager: documenter une helper-fonction pour exécutions simples (réduire la friction de migration).
